# Решение задания: Оптимальное расписание. Стратегия разделения процессоров

### Вариант 1:
| Задания      |  A  |  B  |  C  |  D  |  E  |  F  |
|:-------------|:---:|:---:|:---:|:---:|:---:|:---:|
| Длительность | 38  | 32  | 23  | 11  |  5  |  5  |
| Приоритеты   |  1  |  2  |  3  |  4  |  5  |  5  |

| Исполнители           |  1  |  2  |  3  |
|:----------------------|:---:|:---:|:---:|
| Производительность(p) |  3  |  2  |  1  |

## Решение
Найдем минимально возможное время выполнения всех заданий ($T_{min}$):
$$T_{min} = \frac {\sum V_i}{\sum p_j} = \frac {38 + 32 + 23 + 11 + 5 + 5}{3 + 2 + 1} = \frac{114}{6} = 19$$

**Основные правила построения:**
1. Чем выше длительность задания, тем выше его приоритет.
2. На задачи с высшим приоритетом назначаются исполнители с высшей производительностью.
3. На задачи назначаются все свободные исполнители, пока это возможно по приоритетам.
4. Если исполнителей меньше, чем задач равного приоритета, используется циклическое переключение.

---

**Шаг 1: Интервал 0 – 6**  
Назначаем: A на P1, B на P2, C на P3.  
Уравнение для поиска $A=B$: $38 - 3t = 32 - 2t \implies \mathbf{t = 6}$.  
Уравнение для поиска $B=C$: $32 - 2t = 23 - t \implies \mathbf{t = 9}$.  
Уравнение для поиска $C=D$: $23 - t = 11 \implies \mathbf{t = 12}$.  
Всегда выбираем минимальное t.

**Состояние задач после Шага 1 ($t=6$):**
| Задания      |  A  |  B  |  C  |  D  |  E  |  F  |
|:-------------|:---:|:---:|:---:|:---:|:---:|:---:|
| Длительность | 20  | 20  | 17  | 11  |  5  |  5  |
| Приоритет    |  1  |  1  |  2  |  3  |  4  |  4  |
| Исполнитель  | <--- P1 P2 | ---> | P3  |  -  |  -  |  -  |

---

### Шаг 2: Интервал 6 – 8
Задачи **A** и **B** сравнялись ($V=20$). Они делят мощности P1 и P2. Средняя производительность на задачу: $p_{AB} = (3+2)/2 = 2,5$.
Уравнение: $AB=C$: $20 - 2,5t = 17 - t \implies 1,5t = 3 \implies \mathbf{t = 2}$.
Уравнение: $C=D$: $17 - t = 11 \implies t = 6 \implies \mathbf{t = 6}$.

**Состояние задач после Шага 2 ($t=2$):**
| Задания      |  A  |  B  |  C  |  D  |  E  |  F  |
|:-------------|:---:|:---:|:---:|:---:|:---:|:---:|
| Длительность | 15  | 15  | 15  | 11  |  5  |  5  |
| Приоритет    |  1  |  1  |  1  |  2  |  3  |  4  |
| Исполнитель  | <--- | P1 P2 P3 | ---> |  -  |  -  |  -  |

---

### Шаг 3: Интервал 8 – 10
Задачи **A, B, C** сравнялись ($V=15$). Все исполнители делят эти задачи. Средняя мощность: $p_{ABC} = 6/3 = 2$.
Уравнение: $ABC=D$: $15 - 2t = 11 \implies 2t = 4 \implies \mathbf{t = 2}$.

**Состояние задач после Шага 3 ($t=2$):**
| Задания      |  A  |  B  |  C  |  D  |  E  |  F  |
|:-------------|:---:|:---:|:---:|:---:|:---:|:---:|
| Длительность | 11  | 11  | 11  | 11  |  5  |  5  |
| Приоритет    |  1  |  1  |  1  |  1  |  2  |  2  |
| Исполнитель  | <--- | P1 P2 P3 | ---> | ---> |  -  |  -  |

---

### Шаг 4: Интервал 10 – 14
Четыре задачи (A, B, C, D) делят мощности трех исполнителей. Средняя мощность: $p_{ABCD} = 6/4 = 1,5$.
Уравнение: $ABCD=E$: $11 - 1,5t = 5 \implies 1,5t = 6 \implies \mathbf{t = 4}$.

**Состояние задач после Шага 4 ($t=4$):**
| Задания      |  A  |  B  |  C  |  D  |  E  |  F  |
|:-------------|:---:|:---:|:---:|:---:|:---:|:---:|
| Длительность |  5  |  5  |  5  |  5  |  5  |  5  |
| Приоритет    |  1  |  1  |  1  |  1  |  1  |  1  |
| Исполнитель  | <--- | <--- | P1 P2 P3 | ---> | ---> | ---> |

---

### Шаг 5: Интервал 14 – 19
Все задачи сравнялись. Средняя мощность на задачу: $p = 6/6 = 1$.
Время до завершения: $5 / 1 = \mathbf{5}$.

---

## Ответ

### Диаграмма Ганта (Циклическое смещение)

```mermaid
gantt
    title Диаграмма Ганта - Стратегия разделения (t = 0-19)
    dateFormat ss
    axisFormat %S
    tickInterval 1s

    section Исполнитель 1
    A :active, a1, 0, 6s
    A :active, a2, after a1, 1s
    B :active, a3, after a2, 1s
    A :active, a4, after a3, 0.66s
    B :active, a5, after a4, 0.66s
    C :active, a6, after a5, 0.68s
    A :active, a7, after a6, 1s
    B :active, a8, after a7, 1s
    C :active, a9, after a8, 1s
    D :active, a10, after a9, 1s
    A :active, a11, after a10, 0.83s
    B :active, a12, after a11, 0.83s
    C :active, a13, after a12, 0.83s
    D :active, a14, after a13, 0.83s
    E :active, a15, after a14, 0.83s
    F :active, a16, after a15, 0.85s

    section Исполнитель 2
    B :active, b1, 0, 6s
    B :active, b2, after b1, 1s
    A :active, b3, after b2, 1s
    B :active, b4, after b3, 0.66s
    C :active, b5, after b4, 0.66s
    A :active, b6, after b5, 0.68s
    B :active, b7, after b6, 1s
    C :active, b8, after b7, 1s
    D :active, b9, after b8, 1s
    A :active, b10, after b9, 1s
    B :active, b11, after b10, 0.83s
    C :active, b12, after b11, 0.83s
    D :active, b13, after b12, 0.83s
    E :active, b14, after b13, 0.83s
    F :active, b15, after b14, 0.83s
    A :active, b16, after b15, 0.85s

    section Исполнитель 3
    C :active, c1, 0, 6s
    C :active, c2, after c1, 2s
    C :active, c3, after c2, 0.66s
    A :active, c4, after c3, 0.66s
    B :active, c5, after c4, 0.68s
    C :active, c6, after c5, 1s
    D :active, c7, after c6, 1s
    A :active, c8, after c7, 1s
    B :active, c9, after c8, 1s
    C :active, c10, after c9, 0.83s
    D :active, c11, after c10, 0.83s
    E :active, c12, after c11, 0.83s
    F :active, c13, after c12, 0.83s
    A :active, c14, after c13, 0.83s
    B :active, c15, after c14, 0.85s
```
### Объяснение построения диаграммы:

Стратегия разделения процессоров подразумевает, что когда несколько исполнителей назначены на группу задач, они распределяют свои усилия поровну между ними. Чтобы избежать ситуации, когда одну задачу делают два человека одновременно, применяется циклическое смещение**:

1.  **Интервал 0–6 сек (3 задачи на 3 исполнителя):**
    Каждый исполнитель закреплен за одной уникальной задачей ($P_1 \to A$, $P_2 \to B$, $P_3 \to C$).

2.  **Интервал 6–8 сек (2 задачи A и B делят мощности P1 и P2):**
    Интервал длительностью $t=2$ делится на 2 равные части по 1 секунде. В первой части $P_1$ делает $A$, во второй — $B$. У $P_2$ порядок обратный ($B$, затем $A$). Исполнитель $P_3$ в это время единолично продолжает выполнять задачу $C$.

3.  **Интервал 8–10 сек (3 задачи A, B, C на 3 исполнителя):**
    Интервал $t=2$ делится на 3 равные части (по $2/3$ сек). Задачи распределяются со сдвигом: 
    * **P1**: $A \to B \to C$
    * **P2**: $B \to C \to A$
    * **P3**: $C \to A \to B$

4.  **Интервал 10–14 сек (4 задачи A, B, C, D на 3 исполнителя):**
    Интервал $t=4$ делится на 4 части по 1 секунде. Каждый исполнитель последовательно переключается между задачами, смещаясь на один шаг относительно коллеги, чтобы задачи выполнялись параллельно.

5.  **Интервал 14–19 сек (6 задач на 3 исполнителя):**
    Интервал $t=5$ делится на 6 частей ($5/6$ сек). Это позволяет всем 6 задачам продвигаться к завершению равномерно и закончиться одновременно в точке $T = 19$.

### Итоговое время выполнения всех заданий: 19.