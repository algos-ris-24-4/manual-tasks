# Задание №10. Задача о максимальном потоке. Вариант 3

## Исходные данные

Пропускная способность дуг сети:

|          Дуги          | sa | sc | sb | ab | ac | bc | bt | ct |
|:----------------------:|:--:|:--:|:--:|:--:|:--:|----|----|----|
| Пропускная способность | 8  | 7  | 5  | 3  | 6  | 5  | 5  | 10 |

### Шаг 1:
Строим ориентированный граф с источником S и стоком t. На дуги пишем их пропускную способность.

<img width="506" height="302" alt="image" src="https://github.com/user-attachments/assets/1261ef55-e188-4fc9-8b2b-8edd1ed607be" />


Строим остаточную сеть. Так как нам не дан поток, все дуги оставляем пустыми. Из-за этого в остаточную сеть вносим обратные дуги с весом пропускной способности.

<img width="511" height="309" alt="image" src="https://github.com/user-attachments/assets/ed87363a-0e73-4c87-b8e8-f8605e6ebbd4" />


### Шаг 2 (начало цикла):
Ищем увеличивающий путь в остаточной сети: был выбран путь t -> c -> S. Минимальный вес дуг на этом пути равен 7.

<img width="497" height="297" alt="image" src="https://github.com/user-attachments/assets/8a33e0ef-faaf-4c42-9029-1d2470505cb5" />


Вычитаем из веса дуг минимальное значение (7), к обратным - добавляем его. Дуги, которые стали нулевыми, удаляем.

<img width="481" height="315" alt="image" src="https://github.com/user-attachments/assets/96119f16-2408-4dc1-bf43-67d384163310" />


Сейчас граф выглядит так: на нём изображены локальные потоки исходной сети и пропускные способности (первая цифра - локальный поток, вторая - пропускная способность).

<img width="508" height="346" alt="image" src="https://github.com/user-attachments/assets/15e90986-7d79-4b3f-a0e3-8589dea6b9e2" />


F(поток) = 7 + 0 = 7

### Шаг 3 (2 итерация цикла):

По новой ищем увеличивающий путь в остаточной сети: был выбран путь t -> b -> S. Минимальный вес дуг на этом пути равен 5.

<img width="504" height="309" alt="image" src="https://github.com/user-attachments/assets/81945e6b-69c7-4f5d-95be-585bf7516b96" />


Вычитаем из веса дуг минимальное значение (5), к обратным - добавляем его. Дуги, которые стали нулевыми, удаляем.

<img width="481" height="295" alt="image" src="https://github.com/user-attachments/assets/c9e5fd7a-73b9-4217-acf8-dc153fa9a346" />


Сейчас граф выглядит так: на нём изображены локальные потоки исходной сети и пропускные способности (первая цифра - локальный поток, вторая - пропускная способность).

<img width="515" height="309" alt="image" src="https://github.com/user-attachments/assets/a27f95c9-8942-4632-b7f7-3678cbe85f29" />


F(поток) = 7 + 5 = 12

### Шаг 4 (3 итерация цикла):

По новой ищем увеличивающий путь в остаточной сети: был выбран путь t -> c -> a -> S. Минимальный вес дуг на этом пути равен 3.

<img width="510" height="313" alt="image" src="https://github.com/user-attachments/assets/929a6282-0503-4d77-a1ef-60a974aba717" />


Вычитаем из веса дуг минимальное значение (3), к обратным - добавляем его. Дуги, которые стали нулевыми, удаляем.

<img width="471" height="322" alt="image" src="https://github.com/user-attachments/assets/1639e6d5-7e26-4859-ab9a-a521e7a0a86a" />


Сейчас граф выглядит так: на нём изображены локальные потоки исходной сети и пропускные способности (первая цифра - локальный поток, вторая - пропускная способность).

<img width="513" height="327" alt="image" src="https://github.com/user-attachments/assets/f8db1538-45e2-4cb2-96f6-d944eec25d26" />


F(поток) = 10 + 5 = 15

### Шаг 5 (4 итерация цикла):
Увеличивающего пути нет -> текущий поток является максимальным -> задача решена -> алгоритм завершает работу.

<img width="506" height="322" alt="image" src="https://github.com/user-attachments/assets/cc6d8013-eda4-4102-b907-1eb81870aebf" />


F(максимальный) = 15

### Шаг 6 (локальный и глобальный законы)

Проверим локальный закон сохранения потока:

1) в b входит 5 + 0 (Sb и ab), выходит 5 (bt) = 5
2) в a входит 3 (Sa), выходит 0 + 3 (ab, ac) = 3
3) в c входит 7 + 3 + 0 (Sc, ac, bc), выходит 10 (ct) = 10

Проверим глобальный закон сохранения потока:

из S выходит 5 + 3 + 7 (Sb, Sa, Sc), в t входит 5 + 10 (bt, ct) = 15
### Шаг 7 (разрезы)

Проверяем значение максимального потока перебором всех разрезов сети.
Чтобы вычислить пропускную способность разреза, нужно сложить пропускные способности всех дуг, выходящих из подмножества Vs и идущих в Vt.
Всего вариантов разреза = 2^(n-2)

| Vs  | Vt   | Пропускная способность |
|-----|------|------------------------|
| S    | t, a, b, c     |     5 + 8 + 7 = 20                   |
| S, a    |  t, b, c    |      5 + 6 + 3 + 7 = 21              | 
| S, b   |  t, a, c    |         8 + 7 + 5 + 5 = 25            | 
| S, c    |   t, a, b   |         5 + 8 + 10 = 23              | 
| S, a, b   |  t, c    |            7 + 6 + 5 + 5 = 23         | 
| S, a, c    |  t, b    |           5 + 3 + 10 = 18            | 
| S, b, c    |  t, a    |           8 + 5 + 10 = 23            | 
| S, a, b, c    |   t   |           5 + 10 = 15                | 

Согласно теореме Форда-Фолкерсона:

Минимальная пропускная способность разреза равна 15 ( Vs = {s, a, b, c}, Vt = {t} ), что совпадает с найденной величиной максимального потока в сети.

### Ответ:
Максимальный поток в сети равен 15, он реализуется следующим локальными потоками:

<img width="513" height="327" alt="image" src="https://github.com/user-attachments/assets/8cd8b169-5736-4e4a-a4d7-3028b439c5aa" />

1
